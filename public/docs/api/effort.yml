/efforts:
  parameters:
  - name: employee_id
    in: query
    schema:
      type: integer
    description: Employee ID
    required: true
  - name: start_time
    in: query
    schema:
      type: date
    description: start time to query effort
    required: true
  - name: end_time
    in: query
    schema:
      type: date
    description: end time to query effort
    required: true
  get:
    summary: Detail effort of a employee
    tags:
    - Efforts
    responses:
      200:
        description: Return all efforts of employee in a period of time
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  effort:
                    type: integer
                    description: Effort value
                  project_name:
                    type: string
                    description: Project name
                  employee_id:
                    type: integer
                    description: Employee ID
                  start_time:
                    type: date
                    description: Start time of effort's sprint
                  end_time:
                    type: date
                    description: End time of effort's sprint
                example:
                  effort: 100
                  project_name: Emres
                  employee_id: 1
                  start_time: "2018-01-01"
                  end_time: "2018-02-01"
      400:
        description: Invalid params
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            examples:
              end_time:
                summary: empty end_time
                value:
                  error:
                    code: 400
                    message: end_time empty
              start_time:
                summary: empty start_time
                value:
                  error:
                    code: 400
                    message: start_time empty
      403:
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
      404:
        description: Cannot find record
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            examples:
              invalid employee:
                value:
                  error:
                    code: 404
                    message: Couldn't find Employee with 'id'= 0
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
/projects/{project_id}/sprints/{sprint_id}/efforts:
  parameters:
  - name: project_id
    in: path
    schema:
      type: integer
    description: Project ID
    required: true
  - name: sprint_id
    in: path
    schema:
      type: integer
    description: Sprint ID
    required: true
  get:
    summary: Get effort of employee in a sprint
    tags:
    - Efforts
    responses:
      200:
        description: Show all effort of employee by a logged in user.
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Effort'
      404:
        description: Cannot find record
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            examples:
              invalid project:
                value:
                  error:
                    code: 404
                    message: Couldn't find Project with 'id'= 0
              invalid sprint:
                value:
                  error:
                    code: 404
                    message: Couldn't find Sprint with 'id'= 0
      403:
        description: Unauthorization
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
  post:
    summary: Create effort of employee in a sprint
    tags:
    - Efforts
    consumes:
    - application/json
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              efforts:
                type: array
                items:
                  properties:
                    employee_id:
                      type: integer
                      description: Employee ID
                    level_id:
                      type: integer
                      description: Level ID
                    effort:
                      type: integer
                      description: Effort Number
          examples:
            normal:
              value:
                efforts:
                  - employee_id: 1
                    level_id: 1
                    effort: 10
                  - employee_id: 2
                    level_id: 2
                    effort: 50
            skip_create:
              summary: invalid employee id & level id
              value:
                efforts:
                  - employee_id: 0
                    level_id: 0
                    effort: 10
    responses:
      201:
        description: Created Successful
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Effort'
            examples:
              default:
                summary: PO & Manager & Admin
                value:
                  id: 53
                  effort: 50
                  employee_level:
                    name: Joelle Watsica
                    id: 3
                    skill:
                      id: 2
                      name: Java
                      logo: http://localhost:3000/uploads/avatar.png
                      level:
                        id: 4
                        name: Junior
                        rank: 1
                        logo: http://localhost:3000/uploads/avatar.png
              skip_create:
                value: []
                summary: Skip Create nvalid employee ID and Level Id
              empty_param_employee:
                value: []
      403:
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
            examples:
              not login:
                value:
                  error:
                    code: 403
                    message: unauthorized
              employee:
                value:
                  error:
                    code: 403
                    message: unauthorized
              manager in other division:
                value:
                  error:
                    code: 403
                    message: unauthorized
      400:
        description: empty/missing params
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            examples:
              missing params:
                value:
                  error:
                    code: 400
                    message: effort is missing
      422:
        description: validate effort
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            examples:
              effort greater 100:
                value:
                  code: 422
                  messages: 'Validation failed: Effort must be less than or equal to 100'
              effort less 0:
                value:
                  code: 422
                  messages: 'Validation failed: Effort must be greater than or equal to 0'
              duped effort:
                value:
                  code: 422
                  messages: 'Validation failed: Employee has already been found in sprint'
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
/projects/{project_id}/sprints/{sprint_id}/efforts/{id}:
  parameters:
  - name: id
    in: path
    schema:
      type: integer
    description: Effort ID
    required: true
  - name: project_id
    in: path
    schema:
      type: integer
    description: Project ID
    required: true
  - name: sprint_id
    in: path
    schema:
      type: integer
    description: Sprint ID
    required: true
  patch:
    summary: Update effort of employee in a sprint
    tags:
    - Efforts
    consumes:
    - application/json
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              effort:
                properties:
                  employee_id:
                    type: integer
                    description: Employee ID
                  level_id:
                    type: integer
                    description: Level ID
                  effort:
                    type: integer
                    description: Effort Number
          example:
            effort:
                employee_id: 1
                level_id: 1
                effort: 10
    responses:
      200:
        description: Created Successful
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Effort'
      400:
        description: Missing params
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            examples:
              missing_params:
                value:
                  error:
                    code: 400
                    message: effort is missing
              empty_params:
                value:
                  error:
                    code: 400
                    message: effort is empty
      403:
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
            examples:
              employee:
                value:
                  error:
                    code: 403
                    message: unauthorized
              manager:
                summary: manager in orther division
                value:
                  error:
                    code: 403
                    message: unauthorized
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
  delete:
    summary: Delete effort of employee in a sprint
    tags:
    - Efforts
    consumes:
    - application/json
    responses:
      200:
        description: Delete Successfully
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/SuccessMessage'
            examples:
              admin:
                value:
                  message: Delete successfully
              product_owner:
                value:
                  message: Delete successfully
              manager:
                summary: manager of PO
                value:
                  message: Delete successfully
      403:
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
            examples:
              guess:
                value:
                  code: 403
                  message: unauthorized
              employee:
                value:
                  code: 403
                  message: unauthorized
              manager_other:
                summary: manager of other division
                value:
                  code: 403
                  message: unauthorized
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
