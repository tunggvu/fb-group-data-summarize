/projects:
  get:
    summary: All projects
    tags:
    - Projects
    consumes:
    - application/json
    parameters:
      - name: "name"
        in: query
        schema:
          type: string
        description: Project Name
      - name: "organization_id"
        in: query
        schema:
          type: integer
        description: Organization ID
    responses:
      200:
        description: Return projects match with params name and organization_id + child
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../schema.yml#/Project'
            examples:
              admin can see all project:
                value:
                - id: 1
                  name: Project 1
                  logo: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
                  starts_on: "2018-08-08"
                  description: Description of project 1
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Employee
                    employee_code: B120000
                    email: employee@framgia.com
                    birthday: "2018-01-01"
                    phone: "0123456789"
                    avatar: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
                - id: 2
                  name: Project 2
                  logo: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
                  starts_on: "2018-08-08"
                  description: Description of project 2
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Employee
                    employee_code: B120000
                    email: employee@framgia.com
                    birthday: "2018-01-01"
                    phone: "0123456789"
                    avatar: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
              manager can see all projects:
                value:
                - id: 1
                  name: Project 1
                  logo: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
                  starts_on: "2018-08-08"
                  description: Description of project 1
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Employee
                    employee_code: B120000
                    email: employee@framgia.com
                    birthday: "2018-01-01"
                    phone: "0123456789"
                    avatar: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
                - id: 2
                  name: Project 2
                  logo: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
                  starts_on: "2018-08-08"
                  description: Description of project 2
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Employee
                    employee_code: B120000
                    email: employee@framgia.com
                    birthday: "2018-01-01"
                    phone: "0123456789"
                    avatar: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
              employee can see all projects:
                value:
                - id: 1
                  name: Project 1
                  logo: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
                  starts_on: "2018-08-08"
                  description: Description of project 1
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Employee
                    employee_code: B120000
                    email: employee@framgia.com
                    birthday: "2018-01-01"
                    phone: "0123456789"
                    avatar: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
                - id: 2
                  name: Project 2
                  logo: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
                  starts_on: "2018-08-08"
                  description: Description of project 2
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Employee
                    employee_code: B120000
                    email: employee@framgia.com
                    birthday: "2018-01-01"
                    phone: "0123456789"
                    avatar: https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png
      403:
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
      404:
        description: Return error when any project match organization_id + child
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            example:
              error:
                code: 404
                message: "Couldn't find Organization with 'id'=0"
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
  post:
    summary: Create a project
    tags:
      - Projects
    consume:
      - application/json
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                description: Project name
              product_owner_id:
                type: integer
                description: Product owner
              starts_on:
                type: date
                description: "Project start time"
              logo:
                type: string
                description: "Project logo encode base64"
          required:
          - name
          - product_owner_id
          example:
            name: Project
            product_owner_id: 1
            start_ons: "2018-01-01"
            logo: "data:image/png;base64,something"
    responses:
      201:
        description: "Create a project"
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Project'
            examples:
              manager can create project:
                value:
                  id: 11
                  name: Project 1
                  description: Description of project 1
                  starts_on: "2018-07-12"
                  logo: "/uploads/avatar.png"
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Administator
                    employee_code: B1210000
                    email: admin@framgia.com
                    birthday: "2018-07-12"
                    phone: 0987654321
                    avatar: "/uploads/avatar.png"
              admin can create project:
                value:
                  id: 11
                  name: Project 1
                  description: Description of project 1
                  starts_on: '2018-07-12'
                  logo: "/uploads/avatar.png"
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Administator
                    employee_code: B1210000
                    email: admin@framgia.com
                    birthday: "2018-07-12"
                    phone: 0987654321
                    avatar: "/uploads/avatar.png"
      403:
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
      400:
        description: missing param name
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            example:
              error:
                code: 400
                message: name is missing
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
/projects/{id}:
  get:
    summary: Get information of specific project
    tags:
    - Projects
    consumes:
    - application/json
    parameters:
      - name: "name"
        in: path
        schema:
          type: integer
        description: Project Name
    responses:
      200:
        description: Show project
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Project'
            examples:
              admin can see any project:
                value:
                  name: Project 1
                  logo: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMaYHrIPq6IFEZc1DyjvRznKuxCvCelfreMChjDJeRusEm0TtgHl
                  description: Description
                  starts_on: "2018-07-12"
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Employee
                    employee_code: B120000
                    email: employee@framgia.com
                    birthday: "2018-07-12"
                    phone: '0123456789'
                    avatar: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMaYHrIPq6IFEZc1DyjvRznKuxCvCelfreMChjDJeRusEm0TtgHl
                  current_sprint:
                    id: 1
                    name: sprint 1
                  current_phase:
                    id: 1
                    name: phase 1
                  phases:
                  - id: 1
                    name: phase 1
                    requirements:
                    - id: 1
                      quantity: 7
                      phase_id: 1
                      level_id: 5
                      skill_level: Middle
                      skill_name: Ruby
                    - id: 2
                      quantity: 2
                      phase_id: 1
                      level_id: 5
                      skill_level: Senior
                      skill_name: Java
                    sprints:
                    - id: 1
                      name: sprint 1
                      starts_on: "2018-07-12"
                      ends_on: "2018-08-20"
                      members:
                      - id: 339
                        effort: 80
                        name: Eloy Grady
                        skill:
                          id: 1
                          name: Ruby
                          logo: ''
                          level:
                            id: 1
                            name: Junior
                            rank: 1
                            logo: "#"
                      - id: 466
                        effort: 25
                        name: Graham Streich III
                        skill:
                          id: 1
                          name: Ruby
                          logo: ''
                          level:
                            id: 1
                            name: Junior
                            rank: 1
                            logo: "#"
              manager can see any project:
                value:
                  name: Project 1
                  logo: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMaYHrIPq6IFEZc1DyjvRznKuxCvCelfreMChjDJeRusEm0TtgHl
                  description: Description
                  starts_on: "2018-07-12"
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Employee
                    employee_code: B120000
                    email: employee@framgia.com
                    birthday: "2018-07-12"
                    phone: '0123456789'
                    avatar: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMaYHrIPq6IFEZc1DyjvRznKuxCvCelfreMChjDJeRusEm0TtgHl
                  current_sprint:
                    id: 1
                    name: sprint 1
                  current_phase:
                    id: 1
                    name: phase 1
                  phases:
                  - id: 1
                    name: phase 1
                    requirements:
                    - id: 1
                      quantity: 7
                      phase_id: 1
                      level_id: 4
                      skill_level: Middle
                      skill_name: Ruby
                    - id: 2
                      quantity: 2
                      phase_id: 1
                      level_id: 4
                      skill_level: Senior
                      skill_name: Java
                    sprints:
                    - id: 1
                      name: sprint 1
                      starts_on: "2018-07-12"
                      ends_on: "2018-08-12"
                      members:
                      - id: 339
                        effort: 80
                        name: Eloy Grady
                        skill:
                          id: 1
                          name: Ruby
                          logo: ''
                          level:
                            id: 1
                            name: Junior
                            rank: 1
                            logo: "#"
                      - id: 466
                        effort: 25
                        name: Graham Streich III
                        skill:
                          id: 1
                          name: Ruby
                          logo: ''
                          level:
                            id: 1
                            name: Junior
                            rank: 1
                            logo: "#"
              employee can see project that employee belongs to:
                value:
                  name: Project 1
                  logo: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMaYHrIPq6IFEZc1DyjvRznKuxCvCelfreMChjDJeRusEm0TtgHl
                  description: Description
                  starts_on: "2018-07-12"
                  product_owner:
                    id: 1
                    organization_id: 1
                    name: Employee
                    employee_code: B120000
                    email: employee@framgia.com
                    birthday: "2018-07-12"
                    phone: '0123456789'
                    avatar: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMaYHrIPq6IFEZc1DyjvRznKuxCvCelfreMChjDJeRusEm0TtgHl
                  current_sprint:
                    id: 1
                    name: sprint 1
                  current_phase:
                    id: 1
                    name: phase 1
                  phases:
                  - id: 1
                    name: phase 1
                    requirements:
                    - id: 1
                      quantity: 7
                      phase_id: 1
                      level_id: 3
                      skill_level: Middle
                      skill_name: Ruby
                    - id: 2
                      quantity: 2
                      phase_id: 1
                      level_id: 3
                      skill_level: Senior
                      skill_name: Java
                    sprints:
                    - id: 1
                      name: sprint 1
                      starts_on: "2018-07-12"
                      ends_on: "2018-08-12"
                      members:
                      - id: 339
                        effort: 80
                        name: Eloy Grady
                        skill:
                          id: 1
                          name: Ruby
                          logo: ''
                          level:
                            id: 1
                            name: Junior
                            rank: 1
                            logo: "#"
                      - id: 466
                        effort: 25
                        name: Graham Streich III
                        skill:
                          id: 1
                          name: Ruby
                          logo: ''
                          level:
                            id: 1
                            name: Junior
                            rank: 1
                            logo: "#"
      403:
        description: Unaithorized
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
      404:
        description: project not found
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            example:
              error:
                code: 404
                message: Couldn't find Project with 'id'=0
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
  patch:
    summary: Update an project
    tags:
    - Projects
    consumes:
    - application/json
    parameters:
    - name: id
      in: path
      type: integer
      description: Project ID
      required: true
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                description: Project name
              description:
                type: string
                description: Project description
              product_owner_id:
                type: integer
                description: Product owner
              starts_on:
                type: date
                description: Project start time
              logo:
                type: string
                description: Project logo encode base64
          example:
            name: Phase 1
            description: Something
            product_owner_id: 1
            starts_on: "2018-07-12"
            logo: "data:image/png;base64,something"
    responses:
      200:
        description: admin can update a project
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Project'
      403:
        description: Employee cannot update
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
  delete:
    summary: Delete project
    tags:
    - Projects
    consumes:
    - application/json
    parameters:
    - name: id
      in: path
      type: integer
      description: Project ID
      required: true
    responses:
      200:
        description: manager delete successfully
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/SuccessMessage'
      403:
        description: employee cannot delete project
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
/projects/{id}/employees:
  get:
    summary: Get employees of specific project
    tags:
    - Projects
    consumes:
    - application/json
    parameters:
      - name: "name"
        in: path
        schema:
          type: integer
        description: Project Name
    responses:
      200:
        description: Show employees of project
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../schema.yml#/Employee'
      403:
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthorizedError'
      404:
        description: project not found
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/Error'
            example:
              error:
                code: 404
                message: Couldn't find Project with 'id'=0
      401:
        description: Unauthenticated
        content:
          application/json:
            schema:
              $ref: '../schema.yml#/UnauthenticatedError'
